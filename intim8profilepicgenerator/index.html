<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Intim8 TG Image</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <meta name=viewport content="initial-scale=1">
    <style type="text/css">
      .ppicframe {
        width:512px;
        height: 512px;
        border-radius: 50%;
        border: 1px solid #333;
        margin: 0 auto 2em auto;
        //background-color: #b41e4b;
        //background-size: contain;
        background-repeat: no-repeat;
        background-position: center center;
        -webkit-box-shadow: 2px 2px 5px 0px #fa2000;
        -moz-box-shadow: 2px 2px 5px 0px #fa2000;
        box-shadow: 2px 2px 5px 0px #fa2000;
      }

      #ppicture_select {
        display: none;
      }

      /* https://cdn.jsdelivr.net/npm/reinvented-color-wheel@0.1.6/css/reinvented-color-wheel.min.css */
      .reinvented-color-wheel,.reinvented-color-wheel--hue-handle,.reinvented-color-wheel--hue-wheel,.reinvented-color-wheel--sv-handle,.reinvented-color-wheel--sv-space{touch-action:manipulation;touch-action:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.reinvented-color-wheel{position:relative;display:inline-block;line-height:0;border-radius:50%}.reinvented-color-wheel--hue-wheel{border-radius:50%}.reinvented-color-wheel--sv-space{position:absolute;left:0;top:0;right:0;bottom:0;margin:auto}.reinvented-color-wheel--hue-handle,.reinvented-color-wheel--sv-handle{position:absolute;box-sizing:border-box;pointer-events:none;border-radius:50%;border:2px solid #fff;box-shadow:inset 0 0 0 1px #000}#
    </style>
  </head>
  <body>

    <div class="container mt-4 text-center">

      <h2>Intim8 TG Profile Picture Generator</h2>

      <div class="mb-4">
        Just select and upload your profile picture, this tool merges it with our logo. Download it, set as profile picture - So much win!
      </div>

      <hr>

      <div class="mt-2">
        <div class="ppicframe" id="ppicframe">
          <img src="" alt="" id="ppicframe_overlay_img">
        </div>

        <div class="row justify-content-center">
          <div class="col align-self-center pb-2">
            <label class="btn btn btn-info" for="ppicture_select">Select profile picture (JPG, PNG)</label>
            <input type="file" name="ppicture_select" id="ppicture_select">
          </div>
        </div>

        <div class="row justify-content-center">
          <div class="col align-self-center pb-2">
            <button class="btn btn-success" id="ppicture_save">Save generated Profile picture</button>
          </div>
        </div>

        <div class="row justify-content-center" style="display:none" id="ppicture_fillcolorswitchframe">
          <div class="col align-self-center pb-2 pt-4">
            <button class="btn btn btn-light" id="ppicture_fillcolorswitch">Change Fill/Background Color</button>
            <div id="colorpick" style="display:none;"></div>
          </div>
        </div>
      </div>

      <img src="" id="ppicframe_target_img" style="border: 1px solid #fa2000;width:512px;height:512px;display: none">

    </div>

    <script type="text/javascript">

      class PPToolbox {
        constructor() {
          this.fillColor = '#b41e4b';

          this.logo = {
            'type'    : 'image/png',
            'width'   : 512,
            'height'  : 512,
            'src'     : 'data:image/png;base64,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'
          }

          this.picture = {
            'type'    : '',
            'width'   : 0,
            'height'  : 0,
            'src'     : ''
          }

          this.allowedFileTypes = ['image/png', 'image/jpg', 'image/jpeg'];
        }

        init() {
          //console.log('init');
          document.getElementById('ppicframe_overlay_img').src = this.logo.src

          var me = this;
          new Picker({
            parent: document.getElementById('colorpick'),
            popup: false,
            alpha: false,
            editor: false,
            color: me.fillColor,
            onChange: function(color) {
              //console.log('color', color)
              document.getElementById('ppicframe').style.backgroundColor = color.rgbaString;

              me.fillColor = color.rgbaString
            },
          });

          return this
        }

        reset() {
          //console.log('reset');
          document.getElementById('ppicture_save').style.display = 'none'
          document.getElementById('ppicture_fillcolorswitchframe').style.display = 'none'
          return this
        }

        resizeImage(width, height, maxWidth, maxHeight, ratio) {
          var newWidth = 0;
          var newHeight = 0;

          if (width > maxWidth && width > height) {
        	    ratio = width / height;
        	    newHeight = maxWidth/ratio;
        	    newWidth = maxWidth;
        	} else  if (height > maxHeight && height > width){
        	    ratio = height / width;
        	    newWidth = maxHeight/ratio;
        	    newHeight = maxHeight;
        	} else {
        	    newWidth = maxWidth;
        	    newHeight = maxHeight;
        	}

          if(width < maxWidth && height < newHeight) {
            newWidth = width;
            newHeight = height;
          }

          return {
            'width'  : newWidth,
            'height' : newHeight
          }
        }

        checkAndUploadImage(input) {
          //console.log('checkAndUploadImage', input);

          var me = this;
          if (input.files && input.files[0]) {
            //console.log('input.files', input.files[0]);

            if(me.allowedFileTypes.indexOf(input.files[0].type.toLowerCase()) > -1) {
              var reader = new FileReader();

              reader.onload = function (e) {
                document.getElementById('ppicframe').style.backgroundImage  = 'url(' + e.target.result + ')'

                me.picture.type = input.files[0].type.toLowerCase();
                me.picture.src = e.target.result;

                var tmpImg = new Image();
                tmpImg.src = e.target.result
                tmpImg.onload = function() {
                  me.picture.width = tmpImg.naturalWidth;
                  me.picture.height = tmpImg.naturalHeight;

                  //console.log('me.picture.width', me.picture.width);
                  //console.log('me.picture.height', me.picture.height);

                  //console.log('me.logo.width', me.logo.width);
                  //console.log('me.logo.height', me.logo.height);

                  var resized = me.resizeImage(me.picture.width, me.picture.height, me.logo.width, me.logo.height, 0);
                  //console.log('me.resizeImage', resized);

                  me.picture.width = resized.width;
                  me.picture.height = resized.height;

                  document.getElementById('ppicture_save').style.display = 'inline-block'
                  document.getElementById('ppicture_fillcolorswitchframe').style.display = 'inline-block'
                  document.getElementById('ppicframe').style.backgroundSize = resized.width + 'px ' + resized.height + 'px'

                  //console.log('me.picture.type', me.picture.type);
                  //console.log('me.picture.src', me.picture.src);

                  tmpImg = null;
                };

              }

              reader.readAsDataURL(input.files[0]);
            } else {
              alert('Sorry, only JPG and PNG files are allowed')
            }
          }
        }

        generateFinalImage() {
          //console.log('generateFinalImage');
          //console.log('this.picture.src', this.picture.src);
          //console.log('this.logo.src', this.logo.src);

          var me = this;

          var canvas = document.createElement("canvas");
          canvas.width = 512;
          canvas.height = 512;
          var context = canvas.getContext("2d");
          //context.beginPath();
          //context.arc(256, 256, 256, 0, 2 * Math.PI);
          //context.clip();
          //context.stroke();

          context.rect(0 , 0 , canvas.width , canvas.height);
          //context.fillStyle = "#b41e4b";
          context.fillStyle = me.fillColor;
          context.fill();

          var myImage = new Image();
          myImage.src = me.picture.src;
          myImage.crossOrigin = 'Anonymous';

          myImage.onload = function() {
            var width = me.picture.width;
            var height = me.picture.height;
            var left = ((512 - width) / 2);
            var top = ((512 - height) / 2);

            context.drawImage(myImage, left, top, width, height);

            var myImage2 = new Image();
            myImage2.src = me.logo.src; // Your own local or online photos
            myImage2.crossOrigin = 'Anonymous';

            myImage2.onload = function(){
              context.drawImage(myImage2, 0, 0, 512, 512);
              var base64 = canvas.toDataURL ("image/png"); //"image/png" here note
              var img = document.getElementById('ppicframe_target_img');

              img.setAttribute('src' , base64);

              var link = document.createElement("a");
              document.body.appendChild(link);
              link.setAttribute("type", "hidden");

              //console.log('base64', base64);
              var partial = base64.replace(/data:image\/png;base64,/, "")
              //console.log('partial', partial);

              link.href = "data:image/png;base64," + partial;
              link.download = "Intim8_Flavoured_ProfilePic.png";
              link.click();
              document.body.removeChild(link);
            }
          }
        }
      }

      var app = null;
      document.addEventListener("DOMContentLoaded", function(event) {
        app = new PPToolbox();
        app.init().reset();

        document.getElementById('ppicture_select').onchange = function() {
          app.checkAndUploadImage(this)
        }

        document.getElementById('ppicture_save').onclick = function() {
          app.generateFinalImage()
        }

        document.getElementById('ppicture_fillcolorswitch').onclick = function() {
          document.getElementById('colorpick').style.display = 'block';
        }
      });
      </script>

      <script>
      /*!
      * vanilla-picker v2.2.1
      * https://github.com/Sphinxxxx/vanilla-picker
      *
      * Copyright 2017-2018 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
      * Released under the ISC license.
      */(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global.Picker=factory());}(this,(function(){'use strict';var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
      return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}
      return _arr;}
      return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();String.prototype.startsWith=String.prototype.startsWith||function(needle){return this.indexOf(needle)===0;};String.prototype.padStart=String.prototype.padStart||function(len,pad){var str=this;while(str.length<len){str=pad+str;}return str;};var colorNames='735AACA770//Xub218Pj/mo5+uvX6mdAP//gtpf//Ur258P//q1d9fXcxop/+TEq9zAAAAqfg/+vN6m1AAD/ngoiiviqt6pSoqzyo3riHxvdX56grk1f/8Aax10mkeqts/39QxbtZJXttkb//jcyxm3BQ86rmAP//wl5AACLwqqAIuL3y8uIYLwv1qampniqAGQAns5vbdrmohiwCLw5uVWsvsdd/4wAsegmTLMqagiwAAsqi6ZZ6uz6j7yPxtzSD2Lxk3L09PudbAM7RwsolADT0kz/xSTfuhAL//vfhaWlpyuxHpD/43rsiIiwn9//rw39uIosi9bp/wD/6w73Nzc9s5+Pj/6v8/9cA3b42qUg6vxgICArmaAIAAtdfrf8vf9n8P/wek3/2m0xnczVxc3bvSwCCsdt///wrvp8OaMs5i5ub6iyk//D1e8ifPwAoui//rNpyxrdjmw9c8ICAq4i4P//mx9+vrSq8t09PTx1ukO6Qqlv/7bBuuy/6B690uILKqpfdh876sd9d4iZnehsMTe0dv///g71lAP8A4nmMs0ys9u+vDmg9d/wD/4pmgAAAcurZs2qzllAADN4lkulXT6txk3Db66qPLNxozre2juokuAPqalj3SNHMgdkxxWF60pGRlwxfl9f/6hr5/+Thx6q/+S1m85/96tutd/fXmszxgIAAe4ma44j8rl/6UAmu0/0UA8so2nDWji87uiqumqmPuY9xbr+7u4rs23CTsb8/+/V95a/9q577xzYU/78z/8DL7b53aDdsu1sODmb11gACAy5nZjOZ1so/wAAlvevI+Pn09QWnhm7ui0UT94q+oBy7ei9KRg5aqLotXad5oFItasmwMDAaihh87r9fdalrN9p9cICQ7gz//r6k5uAP9/4qhRoK01te0rSM7cwAICA91x2L/Yclr/2NHcw1QODQd6w7oLuua09d6zudh////t359fX1enn//8Ao0ims0y';var colorNamesDeser=void 0;var Color=function(){function Color(r,g,b,a){classCallCheck(this,Color);var that=this;function parseString(input){if(input.startsWith('hsl')){var _input$match$map=input.match(/([\-\d\.e]+)/g).map(Number),_input$match$map2=slicedToArray(_input$match$map,4),h=_input$match$map2[0],s=_input$match$map2[1],l=_input$match$map2[2],_a=_input$match$map2[3];if(_a===undefined){_a=1;}
      h/=360;s/=100;l/=100;that.hsla=[h,s,l,_a];}
      else if(input.startsWith('rgb')){var _input$match$map3=input.match(/([\-\d\.e]+)/g).map(Number),_input$match$map4=slicedToArray(_input$match$map3,4),_r=_input$match$map4[0],_g=_input$match$map4[1],_b=_input$match$map4[2],_a2=_input$match$map4[3];if(_a2===undefined){_a2=1;}
      that.rgba=[_r,_g,_b,_a2];}
      else{if(input.startsWith('#')){that.rgba=Color.hexToRgb(input);}else{that.rgba=Color.nameToRgb(input)||Color.hexToRgb(input);}}}
      if(r===undefined);else if(Array.isArray(r)){this.rgba=r;}
      else if(b===undefined){var color=r&&(''+r).trim();if(color){parseString(color.toLowerCase());}}else{this.rgba=[r,g,b,a===undefined?1:a];}}
      createClass(Color,[{key:'rgba',get:function get$$1(){if(this._rgba){return this._rgba;}
      if(!this._hsla){throw new Error('No color is set');}
      return this._rgba=Color.hslToRgb(this._hsla);},set:function set$$1(rgb){if(rgb.length===3){rgb[3]=1;}
      this._rgba=rgb;this._hsla=null;}},{key:'rgbString',get:function get$$1(){return 'rgb('+this.rgba.slice(0,3)+')';}},{key:'rgbaString',get:function get$$1(){return 'rgba('+this.rgba+')';}},{key:'hsla',get:function get$$1(){if(this._hsla){return this._hsla;}
      if(!this._rgba){throw new Error('No color is set');}
      return this._hsla=Color.rgbToHsl(this._rgba);},set:function set$$1(hsl){if(hsl.length===3){hsl[3]=1;}
      this._hsla=hsl;this._rgba=null;}},{key:'hslString',get:function get$$1(){var c=this.hsla;return 'hsl('+c[0]*360+','+c[1]*100+'%,'+c[2]*100+'%)';}},{key:'hslaString',get:function get$$1(){var c=this.hsla;return 'hsla('+c[0]*360+','+c[1]*100+'%,'+c[2]*100+'%,'+c[3]+')';}},{key:'hex',get:function get$$1(){var rgb=this.rgba,hex=rgb.map(function(x,i){return i<3?x.toString(16):Math.round(x*255).toString(16);});return '#'+hex.map(function(x){return x.padStart(2,'0');}).join('');},set:function set$$1(hex){this.rgba=Color.hexToRgb(hex);}}],[{key:'hexToRgb',value:function hexToRgb(input){var hex=(input.startsWith('#')?input.slice(1):input).replace(/^(\w{3})$/,'$1F').replace(/^(\w)(\w)(\w)(\w)$/,'$1$1$2$2$3$3$4$4').replace(/^(\w{6})$/,'$1FF');if(!hex.match(/^([0-9a-fA-F]{8})$/)){throw new Error('Unknown hex color; '+input);}
      var rgba=hex.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(x){return parseInt(x,16);});rgba[3]=rgba[3]/255;return rgba;}},{key:'nameToRgb',value:function nameToRgb(input){if(!colorNamesDeser){colorNamesDeser={};colorNames.match(/.{7}/g).forEach(function(x){return colorNamesDeser[x.slice(0,3)]=atob(x.slice(-4)).split('').map(function(b){return b.charCodeAt(0);});});}
      var hash=[].reduce.call(input.replace('ey','ay'),function(h,c){return(h<<2)+c.charCodeAt(0);},0).toString(36).slice(-3);return colorNamesDeser[hash];}},{key:'rgbToHsl',value:function rgbToHsl(_ref){var _ref2=slicedToArray(_ref,4),r=_ref2[0],g=_ref2[1],b=_ref2[2],a=_ref2[3];r/=255;g/=255;b/=255;var max=Math.max(r,g,b),min=Math.min(r,g,b);var h=void 0,s=void 0,l=(max+min)/2;if(max===min){h=s=0;}else{var d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}
      h/=6;}
      return[h,s,l,a];}},{key:'hslToRgb',value:function hslToRgb(_ref3){var _ref4=slicedToArray(_ref3,4),h=_ref4[0],s=_ref4[1],l=_ref4[2],a=_ref4[3];var r=void 0,g=void 0,b=void 0;if(s===0){r=g=b=l;}else{var hue2rgb=function hue2rgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p;};var q=l<0.5?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3);}
      var rgba=[r*255,g*255,b*255].map(Math.round);rgba[3]=a;return rgba;}}]);return Color;}();var root=window;function dragTracker(options){var ep=Element.prototype;if(!ep.matches)ep.matches=ep.msMatchesSelector||ep.webkitMatchesSelector;if(!ep.closest)ep.closest=function(s){var node=this;do{if(node.matches(s))return node;node=node.tagName==='svg'?node.parentNode:node.parentElement;}while(node);return null;};options=options||{};var container=options.container||document.documentElement,selector=options.selector,callback=options.callback||console.log,callbackStart=options.callbackDragStart,callbackEnd=options.callbackDragEnd,callbackClick=options.callbackClick,propagate=options.propagateEvents,roundCoords=options.roundCoords!==false,dragOutside=options.dragOutside!==false,handleOffset=options.handleOffset||options.handleOffset!==false;var offsetToCenter=null;switch(handleOffset){case 'center':offsetToCenter=true;break;case 'topleft':case 'top-left':offsetToCenter=false;break;}
      var dragState=void 0;function getMousePos(e,elm,offset,stayWithin){var x=e.clientX,y=e.clientY;function respectBounds(value,min,max){return Math.max(min,Math.min(value,max));}
      if(elm){var bounds=elm.getBoundingClientRect();x-=bounds.left;y-=bounds.top;if(offset){x-=offset[0];y-=offset[1];}
      if(stayWithin){x=respectBounds(x,0,bounds.width);y=respectBounds(y,0,bounds.height);}
      if(elm!==container){var center=offsetToCenter!==null?offsetToCenter:elm.nodeName==='circle'||elm.nodeName==='ellipse';if(center){x-=bounds.width/2;y-=bounds.height/2;}}}
      return roundCoords?[Math.round(x),Math.round(y)]:[x,y];}
      function stopEvent(e){e.preventDefault();if(!propagate){e.stopPropagation();}}
      function onDown(e){var target=void 0;if(selector){target=selector instanceof Element?selector.contains(e.target)?selector:null:e.target.closest(selector);}else{target={};}
      if(target){stopEvent(e);var mouseOffset=selector&&handleOffset?getMousePos(e,target):[0,0],startPos=getMousePos(e,container,mouseOffset);dragState={target:target,mouseOffset:mouseOffset,startPos:startPos,actuallyDragged:false};if(callbackStart){callbackStart(target,startPos);}}}
      function onMove(e){if(!dragState){return;}
      stopEvent(e);var start=dragState.startPos,pos=getMousePos(e,container,dragState.mouseOffset,!dragOutside);dragState.actuallyDragged=dragState.actuallyDragged||start[0]!==pos[0]||start[1]!==pos[1];callback(dragState.target,pos,start);}
      function onEnd(e,cancelled){if(!dragState){return;}
      if(callbackEnd||callbackClick){var isClick=!dragState.actuallyDragged,pos=isClick?dragState.startPos:getMousePos(e,container,dragState.mouseOffset,!dragOutside);if(callbackClick&&isClick&&!cancelled){callbackClick(dragState.target,pos);}
      if(callbackEnd){callbackEnd(dragState.target,pos,dragState.startPos,cancelled||isClick&&callbackClick);}}
      dragState=null;}
      addEvent(container,'mousedown',function(e){if(isLeftButton(e)){onDown(e);}else{onEnd(e,true);}});addEvent(container,'touchstart',function(e){return relayTouch(e,onDown);});addEvent(root,'mousemove',function(e){if(!dragState){return;}
      if(isLeftButton(e)){onMove(e);}
      else{onEnd(e);}});addEvent(root,'touchmove',function(e){return relayTouch(e,onMove);});addEvent(container,'mouseup',function(e){if(dragState&&!isLeftButton(e)){onEnd(e);}});function onTouchEnd(e,cancelled){onEnd(tweakTouch(e),cancelled);}
      addEvent(container,'touchend',function(e){return onTouchEnd(e);});addEvent(container,'touchcancel',function(e){return onTouchEnd(e,true);});function addEvent(target,type,handler){target.addEventListener(type,handler);}
      function isLeftButton(e){return e.buttons!==undefined?e.buttons===1:e.which===1;}
      function relayTouch(e,handler){if(e.touches.length!==1){onEnd(e,true);return;}
      handler(tweakTouch(e));}
      function tweakTouch(e){var touch=e.targetTouches[0];if(!touch){touch=e.changedTouches[0];}
      touch.preventDefault=e.preventDefault.bind(e);touch.stopPropagation=e.stopPropagation.bind(e);return touch;}}
      function parseHTML(htmlString){var div=document.createElement('div');div.innerHTML=htmlString;return div.firstElementChild;}
      function addEvent(target,type,handler){target.addEventListener(type,handler,false);}
      var BG_TRANSP='url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'2\' height=\'2\'%3E%3Cpath d=\'M1,0H0V1H2V2H1\' fill=\'lightgrey\'/%3E%3C/svg%3E")';var HUES=360;document.documentElement.firstElementChild.appendChild(document.createElement('style')).textContent='.picker_wrapper.no_alpha .picker_alpha,.picker_wrapper.no_editor .picker_editor{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em;margin: 0 auto !important;}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:\'\';display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:\'\';display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6rem}.layout_default .picker_editor input{width:calc(100% + 2px);height:calc(100% + 2px)}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;cursor:default;font-family:sans-serif;pointer-events:auto}.picker_wrapper button,.picker_wrapper input{margin:-1px}.picker_selector{position:absolute;z-index:1;display:block;transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'2\' height=\'2\'%3E%3Cpath d=\'M1,0H0V1H2V2H1\' fill=\'lightgrey\'/%3E%3C/svg%3E") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{box-sizing:border-box;font-family:monospace;padding:.1em .2em}.picker_sample::before{content:\'\';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_done button{box-sizing:border-box;padding:.2em .5em;cursor:pointer}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;transform:skew(45deg);transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}';var Picker=function(){function Picker(options){classCallCheck(this,Picker);this.settings={popup:'right',layout:'default',alpha:true,editor:true};this.setOptions(options);}
      createClass(Picker,[{key:'setOptions',value:function setOptions(options){var _this=this;if(!options){return;}
      var settings=this.settings;function transfer(source,target,skipKeys){for(var key in source){if(skipKeys&&skipKeys.indexOf(key)>=0){continue;}
      target[key]=source[key];}}
      if(options instanceof HTMLElement){settings.parent=options;}else{transfer(options,settings);}
      if(options.onChange){this.onChange=options.onChange;}
      if(options.onDone){this.onDone=options.onDone;}
      var col=options.color||options.colour;if(col){this._setColor(col);}
      if(settings.parent&&settings.popup&&!this._popupInited){addEvent(settings.parent,'click',function(e){return _this.openHandler(e);});this._popupInited=true;}else if(options.parent&&!settings.popup){this.show();}}},{key:'openHandler',value:function openHandler(e){this.show();this.settings.parent.style.pointerEvents='none';}},{key:'closeHandler',value:function closeHandler(e){var doHide=false;if(e.type==='mousedown'){if(!this.domElement.contains(e.target)){doHide=true;}}
      else{e.preventDefault();e.stopPropagation();doHide=true;}
      if(doHide){this.hide();this.settings.parent.style.pointerEvents='';}}},{key:'setColor',value:function setColor(color){this._setColor(color);}},{key:'_setColor',value:function _setColor(color,fromEditor){var c=new Color(color);if(!this.settings.alpha){var hsla=c.hsla;hsla[3]=1;c.hsla=hsla;}
      this.colour=this.color=c;this._setHSLA(null,null,null,null,fromEditor);}},{key:'setColour',value:function setColour(colour){this.setColor(colour);}},{key:'show',value:function show(){var parent=this.settings.parent;if(!parent){return;}
      if(this.domElement){this.domElement.style.display='';this._setPosition();return;}
      var html=this.settings.template||'<div class="picker_wrapper"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div></div>';var wrapper=parseHTML(html);this.domElement=wrapper;this._domH=wrapper.querySelector('.picker_hue');this._domSL=wrapper.querySelector('.picker_sl');this._domA=wrapper.querySelector('.picker_alpha');this._domEdit=wrapper.querySelector('.picker_editor input');this._domSample=wrapper.querySelector('.picker_sample');this._domOkay=wrapper.querySelector('.picker_done button');wrapper.classList.add('layout_'+this.settings.layout);if(!this.settings.alpha){wrapper.classList.add('no_alpha');}
      if(!this.settings.editor){wrapper.classList.add('no_editor');}
      this._ifPopup(function(){return wrapper.classList.add('popup');});this._setPosition();if(this.colour){this._updateUI();}else{this._setColor('#0cf');}
      this._bindEvents();}},{key:'hide',value:function hide(){if(this.domElement){this.domElement.style.display='none';}}},{key:'_bindEvents',value:function _bindEvents(){var _this2=this;var that=this;function createDragConfig(container,callbackRelative){function relayDrag(_,pos){var relX=pos[0]/container.clientWidth,relY=pos[1]/container.clientHeight;callbackRelative(relX,relY);}
      var config={container:container,dragOutside:false,callback:relayDrag,callbackClick:relayDrag,callbackDragStart:relayDrag,propagateEvents:true};return config;}
      dragTracker(createDragConfig(this._domH,function(x,y){return that._setHSLA(x);}));dragTracker(createDragConfig(this._domSL,function(x,y){return that._setHSLA(null,x,1-y);}));if(this.settings.alpha){dragTracker(createDragConfig(this._domA,function(x,y){return that._setHSLA(null,null,null,1-y);}));}
      if(this.settings.editor){addEvent(this._domEdit,'input',function(e){var color=this.value;try{new Color(this.value);that._setColor(color,true);}catch(ex){}});}
      addEvent(window,'mousedown',function(e){return _this2._ifPopup(function(){return _this2.closeHandler(e);});});addEvent(this._domOkay,'click',function(e){_this2._ifPopup(function(){return _this2.closeHandler(e);});if(_this2.onDone){_this2.onDone(_this2.colour);}});}},{key:'_setPosition',value:function _setPosition(){var parent=this.settings.parent,elm=this.domElement;if(parent!==elm.parentNode){parent.appendChild(elm);}
      this._ifPopup(function(popup){if(getComputedStyle(parent).position==='static'){parent.style.position='relative';}
      var cssClass=popup===true?'popup_right':'popup_'+popup;['popup_top','popup_bottom','popup_left','popup_right'].forEach(function(c){if(c===cssClass){elm.classList.add(c);}else{elm.classList.remove(c);}});elm.classList.add(cssClass);});}},{key:'_setHSLA',value:function _setHSLA(h,s,l,a,fromEditor){var col=this.colour;var hsla=col.hsla;[h,s,l,a].forEach(function(x,i){if(x||x===0){hsla[i]=x;}});col.hsla=hsla;this._updateUI(fromEditor);if(this.onChange){this.onChange(col);}}},{key:'_updateUI',value:function _updateUI(fromEditor){if(!this.domElement){return;}
      var col=this.colour,hsl=col.hsla,cssHue='hsl('+hsl[0]*HUES+', 100%, 50%)',cssHSL=col.hslString,cssHSLA=col.hslaString;var uiH=this._domH,uiSL=this._domSL,uiA=this._domA;function posX(parent,child,relX){child.style.left=relX*100+'%';}
      function posY(parent,child,relY){child.style.top=relY*100+'%';}
      posX(uiH,uiH.firstElementChild,hsl[0]);this._domSL.style.backgroundColor=this._domH.style.color=cssHue;posX(uiSL,uiSL.firstElementChild,hsl[1]);posY(uiSL,uiSL.firstElementChild,1-hsl[2]);uiSL.style.color=cssHSL;posY(uiA,uiA.firstElementChild,1-hsl[3]);var opaque=cssHSL,transp=opaque.replace('hsl','hsla').replace(')',', 0)'),bg='linear-gradient('+[opaque,transp]+')';this._domA.style.backgroundImage=bg+', '+BG_TRANSP;if(!fromEditor){var hex=col.hex;this._domEdit.value=this.settings.alpha?hex:hex.substr(0,7);}
      this._domSample.style.color=cssHSLA;}},{key:'_ifPopup',value:function _ifPopup(actionIf,actionElse){if(this.settings.parent&&this.settings.popup){actionIf&&actionIf(this.settings.popup);}else{actionElse&&actionElse();}}}]);return Picker;}();return Picker;})));
      </script>

  </body>
</html>
